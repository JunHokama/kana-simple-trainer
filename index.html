<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Treino de Japon√™s</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin: 40px; }
    table { margin: 0 auto; border-collapse: collapse; }
    td, th {
      border: 1px solid #aaa;
      padding: 10px;
      font-size: 28px;
      text-align: center;
      min-width: 50px;
    }
    label { cursor: pointer; display: block; }
    .kana { font-size: 120px; margin: 20px; }
    #feedback { font-size: 20px; margin-top: 10px; height: 24px; }

    .page { display: none; }
    
    .menu {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    margin-top: 30px;
    }

    .menu button {
    width: 250px;
    font-size: 22px;
    padding: 15px 30px;
    cursor: pointer;
    }

  </style>
</head>
<body>

  <!-- HOME -->
  <div id="home" class="page" style="display:block;">
    <h1>Treinos de Japon√™s</h1>
    <div class="menu">
      <button onclick="showPage('hiragana')">Hiragana</button>
      <button onclick="showPage('katakana')">Katakana</button>
      <button onclick="showPage('numeros')">N√∫meros (1‚Äì10)</button>
    </div>
  </div>

  <!-- HIRAGANA -->
  <div id="hiragana" class="page">
    <h2>Selecione os Hiragana</h2>
    <div id="table-container"></div>
    <button id="start-hira">Iniciar treino</button>
    <hr>

    <div id="app-hira" style="display:none;">
      <div class="kana" id="kana-hira"></div>
      <input id="answer-hira" placeholder="romaniza√ß√£o..." autocomplete="off">
      <p id="feedback-hira"></p>
    </div>

    <button onclick="showPage('home')">Voltar</button>
  </div>

  <!-- KATAKANA -->
  <div id="katakana" class="page">
    <h2>Selecione os Katakana</h2>
    <div id="table-kata"></div>
    <button id="start-kata">Iniciar treino</button>
    <hr>

    <div id="app-kata" style="display:none;">
      <div class="kana" id="kana-kata"></div>
      <input id="answer-kata" placeholder="romaniza√ß√£o..." autocomplete="off">
      <p id="feedback-kata"></p>
    </div>

    <button onclick="showPage('home')">Voltar</button>
  </div>

  <!-- N√öMEROS -->
  <div id="numeros" class="page">
    <h2>Treino de N√∫meros (1‚Äì10)</h2>

    <button id="start-num">Iniciar treino</button>

    <hr>

    <div id="app-num" style="display:none;">
      <div class="kana" id="kana-num"></div>
      <input id="answer-num" placeholder="romaniza√ß√£o..." autocomplete="off">
      <p id="feedback-num"></p>
    </div>

    <button onclick="showPage('home')">Voltar</button>
  </div>



<script>
// --- Controle de p√°ginas ---
function showPage(id) {
  document.querySelectorAll(".page").forEach(p => p.style.display = "none");
  document.getElementById(id).style.display = "block";
}

// ------------ TABELAS BASE (HIRAGANA E KATAKANA) -------------------

const VOGAIS = ["A","I","U","E","O"];

const HIRAGANA_TABLE = {
  "":  { "A":"„ÅÇ","I":"„ÅÑ","U":"„ÅÜ","E":"„Åà","O":"„Åä" },
  "K": { "A":"„Åã","I":"„Åç","U":"„Åè","E":"„Åë","O":"„Åì" },
  "S": { "A":"„Åï","I":"„Åó","U":"„Åô","E":"„Åõ","O":"„Åù" },
  "T": { "A":"„Åü","I":"„Å°","U":"„Å§","E":"„Å¶","O":"„Å®" },
  "N": { "A":"„Å™","I":"„Å´","U":"„Å¨","E":"„Å≠","O":"„ÅÆ" },
  "H": { "A":"„ÅØ","I":"„Å≤","U":"„Åµ","E":"„Å∏","O":"„Åª" },
  "M": { "A":"„Åæ","I":"„Åø","U":"„ÇÄ","E":"„ÇÅ","O":"„ÇÇ" },
  "Y": { "A":"„ÇÑ",       "U":"„ÇÜ",       "O":"„Çà" },
  "R": { "A":"„Çâ","I":"„Çä","U":"„Çã","E":"„Çå","O":"„Çç" },
  "W": { "A":"„Çè",                     "O":"„Çí" }
};

const KATAKANA_TABLE = {
  "":  { "A":"„Ç¢","I":"„Ç§","U":"„Ç¶","E":"„Ç®","O":"„Ç™" },
  "K": { "A":"„Ç´","I":"„Ç≠","U":"„ÇØ","E":"„Ç±","O":"„Ç≥" },
  "S": { "A":"„Çµ","I":"„Ç∑","U":"„Çπ","E":"„Çª","O":"„ÇΩ" },
  "T": { "A":"„Çø","I":"„ÉÅ","U":"„ÉÑ","E":"„ÉÜ","O":"„Éà" },
  "N": { "A":"„Éä","I":"„Éã","U":"„Éå","E":"„Éç","O":"„Éé" },
  "H": { "A":"„Éè","I":"„Éí","U":"„Éï","E":"„Éò","O":"„Éõ" },
  "M": { "A":"„Éû","I":"„Éü","U":"„É†","E":"„É°","O":"„É¢" },
  "Y": { "A":"„É§",       "U":"„É¶",       "O":"„É®" },
  "R": { "A":"„É©","I":"„É™","U":"„É´","E":"„É¨","O":"„É≠" },
  "W": { "A":"„ÉØ",                     "O":"„É≤" }
};

// --- ROMAJI MAP (apenas 1 mapa para ambos) ---
const ROMAJI_MAP = {};

// Preencher com hiragana
for (const cons in HIRAGANA_TABLE) {
  for (const vow in HIRAGANA_TABLE[cons]) {
    ROMAJI_MAP[HIRAGANA_TABLE[cons][vow]] = (cons + vow).toLowerCase();
  }
}
// Casos especiais hiragana
ROMAJI_MAP["„Åó"] = "shi";
ROMAJI_MAP["„Å°"] = "chi";
ROMAJI_MAP["„Å§"] = "tsu";
ROMAJI_MAP["„Åµ"] = "fu";
ROMAJI_MAP["„Çí"] = "wo";

// Preencher com katakana
for (const cons in KATAKANA_TABLE) {
  for (const vow in KATAKANA_TABLE[cons]) {
    ROMAJI_MAP[KATAKANA_TABLE[cons][vow]] = (cons + vow).toLowerCase();
  }
}
// Casos especiais katakana
ROMAJI_MAP["„Ç∑"] = "shi";
ROMAJI_MAP["„ÉÅ"] = "chi";
ROMAJI_MAP["„ÉÑ"] = "tsu";
ROMAJI_MAP["„Éï"] = "fu";
ROMAJI_MAP["„É≤"] = "wo";



// --- Shuffle ---
function shuffle(array) {
  for (let i = array.length -1; i>0; i--){
    const j = Math.floor(Math.random()*(i+1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

// --- Tabela de Hiragana ---
const contHira = document.getElementById("table-container");
const tableHira = document.createElement("table");

let head = document.createElement("tr");
head.appendChild(document.createElement("th"));
VOGAIS.forEach(v => {
  const th = document.createElement("th");
  th.textContent = v;
  head.appendChild(th);
});
tableHira.appendChild(head);

for (const cons in HIRAGANA_TABLE) {
  const tr = document.createElement("tr");
  const th = document.createElement("th");
  th.textContent = cons;
  tr.appendChild(th);

  VOGAIS.forEach(v => {
    const td = document.createElement("td");
    if (HIRAGANA_TABLE[cons][v]) {
      td.innerHTML = `<label><input type="checkbox" value="${HIRAGANA_TABLE[cons][v]}"> ${HIRAGANA_TABLE[cons][v]}</label>`;
    }
    tr.appendChild(td);
  });

  tableHira.appendChild(tr);
}
contHira.appendChild(tableHira);


// --- Tabela de Katakana ---
const contKata = document.getElementById("table-kata");
const tableKata = document.createElement("table");

let head2 = document.createElement("tr");
head2.appendChild(document.createElement("th"));
VOGAIS.forEach(v => {
  const th = document.createElement("th");
  th.textContent = v;
  head2.appendChild(th);
});
tableKata.appendChild(head2);

for (const cons in KATAKANA_TABLE) {
  const tr = document.createElement("tr");
  const th = document.createElement("th");
  th.textContent = cons;
  tr.appendChild(th);

  VOGAIS.forEach(v => {
    const td = document.createElement("td");
    if (KATAKANA_TABLE[cons][v]) {
      td.innerHTML = `<label><input type="checkbox" value="${KATAKANA_TABLE[cons][v]}"> ${KATAKANA_TABLE[cons][v]}</label>`;
    }
    tr.appendChild(td);
  });

  tableKata.appendChild(tr);
}
contKata.appendChild(tableKata);


// ----------------- L√≥gica Hiragana -----------------
let hiraSel = [];
let hiraIdx = 0;

document.getElementById("start-hira").onclick = () => {
  hiraSel = [...document.querySelectorAll("#table-container input:checked")].map(x => x.value);

  if (hiraSel.length === 0) {
    alert("Selecione pelo menos 1 hiragana!");
    return;
  }

  hiraSel = shuffle(hiraSel);
  hiraIdx = 0;

  document.getElementById("app-hira").style.display = "block";
  showHira();
};

function showHira() {
  document.getElementById("feedback-hira").textContent = "";
  document.getElementById("answer-hira").value = "";
  document.getElementById("kana-hira").textContent = hiraSel[hiraIdx];
}

document.getElementById("answer-hira").addEventListener("keyup", e => {
  if (e.key !== "Enter") return;

  const cur = hiraSel[hiraIdx];
  const ok = ROMAJI_MAP[cur];

  if (e.target.value.trim().toLowerCase() === ok) {
    document.getElementById("feedback-hira").textContent = "‚úîÔ∏è Correto!";
    hiraIdx++;
    if (hiraIdx >= hiraSel.length) {
      document.getElementById("feedback-hira").textContent = "üéâ Fim!";
      document.getElementById("kana-hira").textContent = "";
      return;
    }
    setTimeout(showHira, 600);
  } else {
    document.getElementById("feedback-hira").textContent = "‚ùå Errado!";
  }
});


// ----------------- L√≥gica Katakana -----------------
let kataSel = [];
let kataIdx = 0;

document.getElementById("start-kata").onclick = () => {
  kataSel = [...document.querySelectorAll("#table-kata input:checked")].map(x => x.value);

  if (kataSel.length === 0) {
    alert("Selecione pelo menos 1 katakana!");
    return;
  }

  kataSel = shuffle(kataSel);
  kataIdx = 0;

  document.getElementById("app-kata").style.display = "block";
  showKata();
};

function showKata() {
  document.getElementById("feedback-kata").textContent = "";
  document.getElementById("answer-kata").value = "";
  document.getElementById("kana-kata").textContent = kataSel[kataIdx];
}

document.getElementById("answer-kata").addEventListener("keyup", e => {
  if (e.key !== "Enter") return;

  const cur = kataSel[kataIdx];
  const ok = ROMAJI_MAP[cur];

  if (e.target.value.trim().toLowerCase() === ok) {
    document.getElementById("feedback-kata").textContent = "‚úîÔ∏è Correto!";
    kataIdx++;
    if (kataIdx >= kataSel.length) {
      document.getElementById("feedback-kata").textContent = "üéâ Fim!";
      document.getElementById("kana-kata").textContent = "";
      return;
    }
    setTimeout(showKata, 600);
  } else {
    document.getElementById("feedback-kata").textContent = "‚ùå Errado!";
  }
});


// ------------------ TREINO DE N√öMEROS --------------------

const NUMS = [
  { jp: "‰∏Ä (1)", romaji: "ichi" },
  { jp: "‰∫å (2)", romaji: "ni" },
  { jp: "‰∏â (3)", romaji: "san" },
  { jp: "Âõõ (4)", romaji: "yon" },
  { jp: "‰∫î (5)", romaji: "go" },
  { jp: "ÂÖ≠ (6)", romaji: "roku" },
  { jp: "‰∏É (7)", romaji: "nana" },
  { jp: "ÂÖ´ (8)", romaji: "hachi" },
  { jp: "‰πù (9)", romaji: "kyuu" },
  { jp: "ÂçÅ (10)", romaji: "juu" }
];

let numsList = [];
let numIndex = 0;

document.getElementById("start-num").onclick = () => {
  numsList = shuffle([...NUMS]);
  numIndex = 0;
  document.getElementById("app-num").style.display = "block";
  showNum();
};

function showNum() {
  document.getElementById("feedback-num").textContent = "";
  document.getElementById("answer-num").value = "";
  document.getElementById("kana-num").textContent = numsList[numIndex].jp;
}

document.getElementById("answer-num").addEventListener("keyup", (e) => {
  if (e.key !== "Enter") return;

  const current = numsList[numIndex];

  if (e.target.value.trim().toLowerCase() === current.romaji) {
    document.getElementById("feedback-num").textContent = "‚úîÔ∏è Correto!";
    numIndex++;
    if (numIndex >= numsList.length) {
      document.getElementById("feedback-num").textContent = "üéâ Fim!";
      document.getElementById("kana-num").textContent = "";
      return;
    }
    setTimeout(showNum, 600);
  } else {
    document.getElementById("feedback-num").textContent = "‚ùå Errado!";
  }
});
</script>

</body>
</html>
