<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Treino de Palavras</title>
  <style>
    /* --- MESMO CSS DO SEU ORIGINAL (Para manter o padr√£o) --- */
    body { font-family: sans-serif; text-align: center; margin: 40px; }
    
    /* Ajuste para palavras: Fonte menor que o kana isolado (80px vs 120px) */
    .kana-word { 
      font-size: 80px; 
      font-weight: bold;
      margin: 30px 0; 
      display: block;
      word-wrap: break-word;
    }

    input {
      display: block;      
      margin: 10px auto;   
      text-align: center;  
      width: 200px;        
      padding: 10px;
      font-size: 18px;
    }

    button {
      font-size: 18px;
      padding: 10px 20px;
      cursor: pointer;
      margin-top: 20px;
      background-color: #f0f0f0;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button:hover { background-color: #e0e0e0; }

    #feedback { font-size: 20px; margin-top: 10px; height: 24px; font-weight: bold; }
    
    /* Painel de Erros (Igual ao original) */
    .error-panel {
      position: fixed; right: 20px; top: 20px;
      width: 150px; padding: 15px;
      background: #fff; border: 2px solid #d32f2f;
      border-radius: 8px; text-align: center;
      display: none; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .error-title { color: #d32f2f; font-weight: bold; font-size: 14px; text-transform: uppercase; }
    .error-count { font-size: 40px; font-weight: bold; color: #d32f2f; display: block; }
    .error-list { font-size: 18px; color: #333; margin-top: 5px; word-wrap: break-word; }
  </style>
</head>
<body>

  <div id="stats-panel" class="error-panel">
    <div class="error-title">Erros</div>
    <span id="global-error-count" class="error-count">0</span>
    <div class="error-title" style="border-top:1px solid #eee; margin-top:5px;">Palavras:</div>
    <div id="global-error-list" class="error-list"></div>
  </div>

  <h1>Treino de Palavras (Simples)</h1>
  <p>Traduza para Romanji (Ex: <em>neko, sushi, kamera</em>)</p>
  
  <div id="game-area">
    <div class="kana-word" id="word-display">...</div>
    <input id="answer-input" placeholder="Digite em romanji..." autocomplete="off">
    <p id="feedback"></p>
    
    <button id="btn-start" onclick="startGame()">Come√ßar / Reiniciar</button>
  </div>

  <br><hr><br>
  <button onclick="window.location.href='index.html'">Voltar para o Menu</button>

<script>
// --- LISTA DE PALAVRAS (Pode adicionar mais aqui, meu consagrado) ---
const WORDS = [
  { jp: "„Å≠„Åì", romaji: "neko" },       // Gato
  { jp: "„ÅÑ„Å¨", romaji: "inu" },        // Cachorro
  { jp: "„ÇÑ„Åæ", romaji: "yama" },       // Montanha
  { jp: "„Åø„Åö", romaji: "mizu" },       // √Ågua
  { jp: "„Åï„Åè„Çâ", romaji: "sakura" },   // Cerejeira
  { jp: "„Åô„Åó", romaji: "sushi" },      // Sushi
  { jp: "„Åè„Çã„Åæ", romaji: "kuruma" },   // Carro
  { jp: "„Ç´„É°„É©", romaji: "kamera" },   // C√¢mera (Kata)
  { jp: "„Éê„Çπ", romaji: "basu" },       // √înibus (Kata)
  { jp: "„Éë„É≥", romaji: "pan" },        // P√£o (Kata)
  { jp: "„Éà„Ç§„É¨", romaji: "toire" },    // Banheiro (Kata)
  { jp: "„Éõ„ÉÜ„É´", romaji: "hoteru" },   // Hotel (Kata)
  { jp: "„Ç∑„É£„ÉÑ", romaji: "shatsu" },   // Camisa (Kata)
  { jp: "„ÉÜ„Çπ„Éà", romaji: "tesuto" },   // Teste (Kata)
  { jp: "„ÇØ„É©„Çπ", romaji: "kurasu" },   // Classe (Kata)
  { jp: "„Åî„ÅØ„Çì", romaji: "gohan" },    // Arroz
  { jp: "„Åà„Åç", romaji: "eki" }         // Esta√ß√£o
];

let gameList = [];
let currentIndex = 0;
let errorCount = 0;
let errorList = [];

// --- Fun√ß√£o de Embaralhar ---
function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

// --- Iniciar Jogo ---
function startGame() {
  gameList = shuffle([...WORDS]); // Clona e mistura
  currentIndex = 0;
  
  // Reseta erros
  errorCount = 0;
  errorList = [];
  updateErrorPanel();
  document.getElementById("stats-panel").style.display = "block";

  showWord();
}

// --- Mostrar Palavra ---
function showWord() {
  if (currentIndex >= gameList.length) {
    document.getElementById("word-display").textContent = "Fim!";
    document.getElementById("feedback").textContent = "üéâ Parab√©ns, acabou!";
    document.getElementById("answer-input").style.display = "none";
    return;
  }

  const currentItem = gameList[currentIndex];
  document.getElementById("word-display").textContent = currentItem.jp;
  
  const input = document.getElementById("answer-input");
  input.style.display = "block";
  input.value = "";
  input.focus();
  document.getElementById("feedback").textContent = "";
}

// --- Verificar Resposta ---
document.getElementById("answer-input").addEventListener("keyup", function(e) {
  if (e.key !== "Enter") return;

  const typed = e.target.value.trim().toLowerCase();
  const correct = gameList[currentIndex].romaji;

  if (typed === correct) {
    // Acertou
    document.getElementById("feedback").textContent = "‚úîÔ∏è Correto!";
    document.getElementById("feedback").style.color = "green";
    
    currentIndex++;
    setTimeout(showWord, 600); // Espera um pouquinho pra mudar
  } else {
    // Errou
    document.getElementById("feedback").textContent = "‚ùå Errado! Tente de novo.";
    document.getElementById("feedback").style.color = "red";
    e.target.value = ""; // Limpa pra tentar de novo
    
    // Registra erro (s√≥ se ainda n√£o registrou essa palavra nesta rodada)
    // Mas a logica simples aqui √© registrar toda vez que erra
    registerError(gameList[currentIndex].jp);
  }
});

// --- Painel de Erros ---
function registerError(word) {
  errorCount++;
  // Adiciona na lista se n√£o estiver repetido visualmente, ou sempre adiciona, vc decide.
  // Vou deixar simples: adiciona na lista visual
  errorList.push(word);
  updateErrorPanel();
}

function updateErrorPanel() {
  document.getElementById("global-error-count").textContent = errorCount;
  // Mostra apenas as ultimas 5 palavras erradas pra n√£o quebrar o layout se errar muito
  const displayList = errorList.slice(-5).join(", "); 
  document.getElementById("global-error-list").textContent = displayList + (errorList.length > 5 ? "..." : "");
}

// Come√ßa com o campo escondido at√© apertar o bot√£o
document.getElementById("answer-input").style.display = "none";

</script>
</body>
</html>